<!DOCTYPE html>
<html>
<head>
<title>Dashboard</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link rel="stylesheet" href="css/style.css">
<style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { display:flex; height:100vh; overflow:hidden; font-family:'Inter',sans-serif; background-color:#f5f5f5; }
    .sidebar { width:284px; background:linear-gradient(135deg,#667eea 0%,#764ba2 100%); color:white; padding:30px 0; position:fixed; height:100vh; overflow-y:auto; box-shadow:2px 0 10px rgba(0,0,0,0.08); }
    .sidebar .navbar-brand { padding:0 25px 30px; display:block; border-bottom:1px solid rgba(255,255,255,0.15); margin-bottom:22px; font-size:0.98rem; font-weight:600; white-space:nowrap; }
    .sidebar a { color:rgba(255,255,255,0.9); text-decoration:none; padding:12px 22px; display:flex; align-items:center; gap:12px; transition:all 0.25s ease; margin:6px 12px; border-radius:8px; font-size:0.95rem; }
    .sidebar a:hover { background-color:rgba(255,255,255,0.12); padding-left:28px; }
    .sidebar a.active { background-color:rgba(255,255,255,0.18); color:white; font-weight:700; }
    .main-content { margin-left:284px; width:calc(100% - 284px); display:flex; flex-direction:column; height:100vh; }
    .top-nav { background-color:white; border-bottom:1px solid #e8e8e8; padding:20px 35px; display:flex; justify-content:space-between; align-items:center; box-shadow:0 1px 3px rgba(0,0,0,0.05); }
    .top-nav h4 { color:#333; font-weight:600; font-size:1.3rem; }
    .top-nav span { color:#888; font-size:0.95rem; }
    .content { flex:1; overflow-y:auto; padding:40px 35px; background-color:#fafafa; }
    .content h3 { color:#333; font-weight:600; margin-bottom:30px; font-size:1.5rem; }
    .summary-card { background:white; border-radius:10px; padding:30px; margin-bottom:25px; box-shadow:0 1px 4px rgba(0,0,0,0.06); border:1px solid #f0f0f0; transition:all 0.3s ease; }
    .summary-card:hover { transform:translateY(-4px); box-shadow:0 4px 12px rgba(0,0,0,0.1); }
    .card-icon { font-size:2.5rem; background:linear-gradient(135deg,#667eea 0%,#764ba2 100%); -webkit-background-clip:text; -webkit-text-fill-color:transparent; margin-bottom:20px; }
    .card-count { font-size:2.2rem; font-weight:700; color:#333; margin-bottom:10px; }
    .card-label { color:#888; font-size:0.95rem; font-weight:500; }
</style>
</head>
<body>
<div class="sidebar">
    <div class="navbar-brand"><i class="fas fa-graduation-cap me-2"></i> Student Management System</div>
    <a href="dashboard.html" class="active"><i class="fas fa-home"></i> Dashboard</a>
    <a href="students.html"><i class="fas fa-users"></i> Students</a>
    <a href="courses.html"><i class="fas fa-book"></i> Courses</a>
    <a href="index.html" style="margin-top:auto;"><i class="fas fa-sign-out-alt"></i> Logout</a>
</div>

<div class="main-content">
    <div class="top-nav">
        <h4>Dashboard</h4>
        <span>Welcome back!</span>
    </div>

    <div class="content">
        <h3 class="mb-4">Dashboard Overview</h3>
        <div class="row g-4">
            <div class="col-md-6 col-lg-4">
                <div class="summary-card">
                    <div class="card-icon"><i class="fas fa-users"></i></div>
                    <div class="card-count" id="totalStudents">0</div>
                    <div class="card-label">Total Students</div>
                </div>
            </div>
            <div class="col-md-6 col-lg-4">
                <div class="summary-card">
                    <div class="card-icon"><i class="fas fa-book"></i></div>
                    <div class="card-count" id="totalCourses">0</div>
                    <div class="card-label">Total Courses</div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
function updateCounts(){
  const students = JSON.parse(localStorage.getItem('students') || '[]');
  const courses = JSON.parse(localStorage.getItem('courses') || '[]');
  document.getElementById('totalStudents').textContent = students.length;
  document.getElementById('totalCourses').textContent = courses.length;
}

// ensure default data (10 courses + 10 students) if missing
function ensureInitialData(){
  if(!localStorage.getItem('courses')){
    const initialCourses = ["BCA","MCA","BSc","BA","BCom","BTech","MTech","MBA","B.Ed","Diploma"];
    const courses = initialCourses.map((n,i)=>({ id: Date.now() + i, name: n }));
    localStorage.setItem('courses', JSON.stringify(courses));
  }

  if(!localStorage.getItem('students')){
    const courses = JSON.parse(localStorage.getItem('courses') || '[]');
    const courseNames = courses.map(c=>c.name);
    const sampleNames = ["Aditi Singh","Rohit Kumar","Neha Sharma","Ankit Verma","Priya Patel","Vikram Rao","Sara Khan","Kunal Mehta","Rina Das","Manish Joshi"];
    const students = sampleNames.map((name,i)=>({
      id: Date.now() + 100 + i,
      name,
      email: name.toLowerCase().replace(/\s+/g,'') + '@mail.com',
      age: 18 + (i % 6),
      course: courseNames[i % courseNames.length]
    }));
    localStorage.setItem('students', JSON.stringify(students));
  }
}

window.addEventListener('storage', function(e){
  if(!e.key || ['students','courses','sm_update'].includes(e.key)) updateCounts();
});

document.addEventListener('DOMContentLoaded', function(){
  ensureInitialData();
  updateCounts();
});
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
